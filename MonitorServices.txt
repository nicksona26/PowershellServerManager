# get all services
$AllServices = Get-Service

# services to monitor
$MonitorServices = "wuauserv","dnscache","bits";

# loop through all services
foreach ($services in $AllServices)
{
  # loop through monitored services
  for each ($a in $MonitoredServices)
  {
    # check if service is in array
    if ($service.name -eq $sa)
    {
      # check if service is not running
      if ($service.status -ne "Running")
      {
        # output service info
	Write-Host "The $($service.DisplayName) service ($($service.Name)) on $env:ComputerName is not in a running state!" `
	-ForegroundColor Red
      }
    }
  }
}
     